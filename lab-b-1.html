<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aktien Monitor</title>
  <script src="https://unpkg.com/feather-icons"></script>
  <style>
    body {
      background-color: #121212;
      color: #e0e0e0;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
    }
    #navMenu {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 70px;
      background: rgba(53,53,53,0.95);
      box-shadow: 0 4px 20px rgba(0,0,0,0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1100;
    }
    #navMenu .menu-item {
      margin: 0 15px;
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 16px;
    }
    #navMenu .menu-item a {
      color: #e0e0e0;
      text-decoration: none;
      padding: 5px 10px;
      border-radius: 5px;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    #navMenu .menu-item:hover a {
      text-shadow: 0 0 5px #666;
    }
    .asset-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 100px;
    }
    .asset-tile {
      background: rgba(105,93,79,0.9);
      border-radius: 8px;
      padding: 15px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      position: relative;
    }
    .recommendation {
      font-weight: bold;
      padding: 5px;
      border-radius: 4px;
      margin-top: 10px;
    }
    .ziel { background: #003300; color: #00ff7f; }
    .stopp { background: #660000; color: #ff4d4d; }
    .alarm { background: #8b0000; color: white; }
    .yellow { background: #5c4b00; color: #ffd700; }
    .red { background: #400000; color: #ff6666; }
    .neutral { background: #333; color: #ccc; }
  </style>
</head>
<body>
  <nav id="navMenu">
    <div class="menu-item"><a href="index.html"><i data-feather="home"></i> Home</a></div>
    <div class="menu-item"><a href="verwaltung.html" class="active"><i data-feather="folder"></i> Verwaltung</a></div>
  </nav>

  <main class="asset-grid" id="aktienGrid"></main>

  <script>
    let nameMap = JSON.parse(localStorage.getItem("nameMap") || JSON.stringify({
  "AAPL": "Apple Inc.",
  "MSFT": "Microsoft Corp.",
  "TSLA": "Tesla Inc."
}));
    let portfolio = JSON.parse(localStorage.getItem("portfolio") || JSON.stringify([
  { symbol: "AAPL", kauf: 130, aktuell: 135, ziel: 150, stop: 120 },
  { symbol: "MSFT", kauf: 250, aktuell: 245, ziel: 270, stop: 230 },
  { symbol: "TSLA", kauf: 700, aktuell: 710, ziel: 750, stop: 660 }
]));

    function getEmpfehlung(aktie) {
      const diff = ((aktie.aktuell - aktie.kauf) / aktie.kauf) * 100;
      if (aktie.aktuell <= aktie.stop) return { text: '<i data-feather="x-octagon"></i> Stop-Loss erreicht', klasse: 'stopp' };
      if (aktie.aktuell >= aktie.ziel) return { text: '<i data-feather="check-circle"></i> Ziel erreicht – verkaufen', klasse: 'ziel' };
      if (diff >= 5) return { text: '<i data-feather="eye"></i> Beobachten', klasse: 'yellow' };
      if (diff < 0) return { text: '<i data-feather="alert-circle"></i> Halten', klasse: 'red' };
      return { text: '<i data-feather="clock"></i> Halten', klasse: 'neutral' };
    }

    function renderGrid() {
      const grid = document.getElementById("aktienGrid");
      grid.innerHTML = "";
      portfolio.forEach((aktie) => {
        const diff = ((aktie.aktuell - aktie.kauf) / aktie.kauf) * 100;
        const empfehlung = getEmpfehlung(aktie);
        const tile = document.createElement("div");
        tile.className = "asset-tile";
        tile.innerHTML = `
          <h3>${aktie.symbol} – ${nameMap[aktie.symbol] || "Unbekannt"}</h3>
          <div>Kaufkurs: <strong>${aktie.kauf.toFixed(2)} $</strong></div>
          <div>Aktuell: <strong>${aktie.aktuell.toFixed(2)} $</strong></div>
          <div>Ziel: ${aktie.ziel.toFixed(2)} $</div>
          <div>Stop: ${aktie.stop.toFixed(2)} $</div>
          <div>Performance: <strong>${diff.toFixed(2)} %</strong></div>
          <div class="recommendation ${empfehlung.klasse}">${empfehlung.text}</div>
        `;
        grid.appendChild(tile);
      });
      feather.replace();
    }

    window.onload = () => renderGrid();
  </script>
</body>
</html>
